function scrollTo(e,n,a){if(e){var t="number"!=typeof e?e.offset().top:e,n=n||700;a||(t-=$(".js-header").outerHeight()),$("html,body").animate({scrollTop:t},n)}}function toggleClass(e,n,a){var t=$(e),i=t.hasClass(n);i?t.removeClass(n):t.addClass(n),a&&a(i)}var $W=$(window),$D=$(document),$H=$("html"),$B=$("body");if(!_GLOB)var _GLOB={};_GLOB.breakpoints={xl:1800,ll:1500,ls:1380,m:1288,mm:1168,ms:1020,sl:960,sm:860,s:767,ss:630,xs:480,header1:1090},$W.load(function(){$B.removeClass("_loading")}),function(e){e.fn.scrollTrigger=function(n){var a=700,n=n||"";e(this).each(function(){var t=e(this);n.speed&&(a=n.speed),t.bind("click",function(i){var r=t.attr("href")||t.data("href");"number"!=typeof r&&(r=e(r),n.margin&&(r=r.offset().top-parseInt(r.css("margin-top")))),n&&n.callbackBefore&&n.callbackBefore(),scrollTo(r,a),n&&n.callbackAfter&&n.callbackAfter(),i.preventDefault()})})}}(jQuery),function(e){e.fn.tabs=function(){e(this).each(function(){function n(e){i.removeClass("_active").eq(e).addClass("_active"),t.removeClass("_active").eq(e).addClass("_active")}var a=e(this),t=a.find(".js-tabs-btn"),i=a.find(".js-tabs-tab");t.bind("click",function(){var a=e(this).index();n(a)})})}}(jQuery),function(e){e.fn.getWidthInPercent=function(){var n=e(this),a=parseFloat(n.css("width"))/parseFloat(n.parent().css("width"));return Math.round(100*a)+"%"}}(jQuery),function(e){e.fn.priceFormat=function(n){for(var a=String(n),t="",i=a.length-1;i>=0;i--)t=a[i]+t,(a.length-i)%3==0&&(t=" "+t);return e.trim(t)}}(jQuery),$.scrollbarWidth=function(){var e,n,a;return void 0===a&&(e=$('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),n=e.children(),a=n.innerWidth()-n.height(99).innerWidth(),e.remove()),a},function(e){e.fn.elemInView=function(n){var a=e(this),t=n||.75,i=$W.scrollTop(),r=$W.height(),s=r*t,o=i+r/2-s/2,l=i+r/2+s/2,c=a.offset().top,d=c+a.outerHeight(),p=!1,u=c>=o,f=l>=c,h=d>=o,v=l>=d;return(u&&f||h&&v)&&(p=!0),o>=c&&d>=l&&(p=!0),p}}(jQuery),$(function(){var e=$(".js-scroll-trigger");e.length&&e.scrollTrigger({})}),$(function(){var e=$(".js-tabs");e.length&&e.tabs({})}),$(function(){$(function(){var e=$(".js-stats");if(e.length){var n=e.data("url"),a=e.find(".js-stats_latency-node"),t=e.find(".js-stats_uptime-node"),i=e.find(".js-stats_canvas");$.ajax({type:"GET",url:n,success:function(e){var n=JSON.parse(e);a.text(n.Latency),t.text(n.Uptime),i.sparkline(n.Values,{type:"bar",height:22,barWidth:4,zeroAxis:!1,barSpacing:2,barColor:"#1FCD00"})}})}})}),jQuery.extend(jQuery.validator.messages,{required:"Введите данные.",remote:"Пожалуйста, введите правильное значение.",email:"Пожалуйста, введите корректный адрес электронной почты.",url:"Пожалуйста, введите корректный URL.",date:"Пожалуйста, введите корректную дату.",dateISO:"Пожалуйста, введите корректную дату в формате ISO.",number:"Пожалуйста, введите число.",digits:"Пожалуйста, вводите только цифры.",creditcard:"Пожалуйста, введите правильный номер кредитной карты.",equalTo:"Пожалуйста, введите такое же значение ещё раз.",extension:"Пожалуйста, выберите файл с правильным расширением.",maxlength:$.validator.format("Пожалуйста, введите не больше {0} символов."),minlength:$.validator.format("Пожалуйста, введите не меньше {0} символов."),rangelength:$.validator.format("Пожалуйста, введите значение длиной от {0} до {1} символов."),range:$.validator.format("Пожалуйста, введите число от {0} до {1}."),max:$.validator.format("Пожалуйста, введите число, меньшее или равное {0}."),min:$.validator.format("Пожалуйста, введите число, большее или равное {0}.")}),function(e){e.validator.addMethod("require_from_group",function(n,a,t){var i=t[0],r=t[1],s=e(r,a.form),o=s.filter(function(){return""!=e(this).val()}),l=s.not(o);return t[2]&&(_GLOB.require_from_group_msg=t[2]),!(o.length<i&&l[0]==a)},function(){return e.validator.format(_GLOB.require_from_group_msg)})}(jQuery),jQuery.validator.addMethod("email",function(e,n){return this.optional(n)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*[.][a-zA-Z0-9-]{1,8}$/.test(e)},"Неверный формат."),jQuery.validator.addMethod("tel",function(e,n){return this.optional(n)||/^([\+])?[\d\- ]{7,20}$/.test(e)},"Неверный формат."),jQuery.validator.addClassRules("js_field_digits",{digits:!0}),function(e){e.fn.validationManager=function(){e(this).each(function(){var n,a=e(this),t=a.find("input"),i=a.find(".js-form__all-msg"),r=a.find("[data-valid-group]"),s=a.attr("action"),o=(a.data("validation-case"),{}),l=!0;e.each(r,function(){var n=e(this),a=n.data("valid-group"),t=n.attr("name");o[t]={require_from_group:[1,'[data-valid-group="'+a+'"]',"Пожалуйста, укажите свой e-mail или телефон."]}}),n={errorClass:"input-error",validClass:"input-success",focusCleanup:!1,focusInvalid:!1,errorElement:"span",ignore:".ignore, :hidden, ._disabled",rules:o,submitHandler:function(){return console.log("submit handle"),l?(l=!1,a.addClass("_disabled"),t.addClass("_disabled"),void e.ajax({type:"POST",url:s,data:a.serialize(),success:function(e){var n=JSON.parse(e),t=n.error,r=n.message;r?i.html(r):i.html(""),t?i.addClass("_error"):(i.removeClass("_error"),a[0].reset())}}).done(function(){l=!0,a.removeClass("_disabled"),t.removeClass("_disabled")})):(i.html("Подождите, идёт обработка."),!1)}},a.validate(n)})}}(jQuery),$(function(){var e=$(".js-form");e.length&&e.validationManager()}),$(function(){!function(e){e.fn.priceCalc=function(n){e(this).each(function(){function n(e){for(var n=0;n<=m.length-1;n++)if(e<=m[n].value)return void(i=m[n])}function a(){var n=Number(i.options.price),a=n,t=[],r=0;return u.filter(":checked").each(function(){var n=e(this),a=n.val(),i=n.data("final-percent"),s=["plus"];"-"==a[0]&&(s[0]="minus"),a.indexOf("%")&&(s[1]=parseInt(a)/100,i?r+=parseInt(a)/100:t.push(s))}),e.each(t,function(){var e=(n*this[1]).toFixed(0);"minus"==this[0]&&(e=-e),e=Number(e),a+=e}),a+=a*r,a.toFixed(0)}function t(){var n;i.options.price?(n=a(),s.removeClass("_custom-pricing"),o.text(e().priceFormat(n))):(s.addClass("_custom-pricing"),n=""),d.val(i.value),p.val(n),l.text(i.options.usersString)}var i,r,s=e(this),o=e(".js-priceCalc_itog"),l=s.find(".js-priceCalc_top-node"),c=s.find(".js-priceCalc_ranges"),d=s.find(".js-priceCalc_input-users"),p=s.find(".js-priceCalc_input-counter-price"),u=s.find(".js-priceCalc_chkb"),f=s.find(".js-priceCalc__options-toggle"),h=s.find(".js-priceCalc__options"),v=s.data("min-value"),g=s.data("max-value"),m=_GLOB.priceRangeSettings,$={min:v,"0%":[v,1],"3%":[v+1,5e4],"35%":[5e5,5e4],"50%":[1e6,1e5],"65%":[2e6,2e5],"80%":[4e6,25e4],"100%":[1e7,5e5],max:g};if(!o.length){var _=s.data("itog-target");o=e(_)}noUiSlider.create(c[0],{start:v,connect:!1,range:$}),r=c[0].noUiSlider,r.on("update",function(e,a){n(e[0]),t()}),u.change(function(){n(r.get()),t()}),f.bind("click",function(e){h.slideToggle(),e.preventDefault()})})}}(jQuery)}),function(e){e.fn.onlyListedKeys=function(n){e(this).each(function(){var a=e(this),t=a.val();a.bind("change input",function(){var e=a.val();n.test(e)?t=e:a.val(t)})})}}(jQuery),$(function(){var e=$(".js-priceCalc");e.length&&e.priceCalc()}),$(function(){var e=$(".js-only-digits");e.length&&e.onlyListedKeys(/^([0-9](\.)?(-)?(,)?){0,}$/)}),$(function(){var e=$(".js-gall"),n=$(".post-contents a img"),a={wrapper:{onClick:"close"}};if(n.length&&n.parents("a").tosrus(a),e.length){var t=[];e.each(function(){var n=$(this),a=n.data("gall-gr");a&&(t[a]?t[a]=t[a].add(n):t[a]=n,e=e.not(n))});for(var i in t)t[i].tosrus(a);e.each(function(){$(this).tosrus(a)})}}),$(function(){function e(){var e=$W.scrollTop();e>10?$B.addClass("_scrolled"):$B.removeClass("_scrolled")}var n=$(".js-header");n.length&&(e(),$W.scroll(function(){e()}))}),$(function(){function e(){for(var e=0;e<r.length;e++)TweenMax.to(r[e],t,{morphSVG:c[e]})}function n(){for(var e=0;e<r.length;e++)TweenMax.to(r[e],t,{morphSVG:o[e]})}var a=$(".js-header-menu-btn");if(a.length){var t=.4,i=a.find(".js-header-menu-btn__main"),r=i.find("path"),s=a.find(".js-header-menu-btn__normal"),o=s.find("path"),l=a.find(".js-header-menu-btn__final"),c=l.find("path");a.click(function(){var a=$B.hasClass("_mob-menu-open");a?($B.removeClass("_mob-menu-open"),n()):($B.addClass("_mob-menu-open"),e())})}}),$(function(){var e='<div class="mfp-close popup-cross popup__closer js-popup_closer"><svg viewBox="0 0 30 30" preserveAspectRatio="none"><g><polyline  points="27.504,3.486 15.004,15.969 14.034,14.997 26.534,2.514 "/><polyline  points="15.974,15.017 3.474,27.5 2.504,26.529 15.004,14.046 "/><polyline  points="3.484,2.506 15.966,15.007 14.995,15.977 2.512,3.476 "/><polyline  points="15.013,14.038 27.496,26.538 26.525,27.508 14.042,15.008 "/></g></svg></div>';_GLOB.closerReference=e}),$(function(){function e(e){e.removeClass("_open"),$B.removeClass("_side-popup-open _side-popup-moved-page"),r.css("margin-right",""),$(".header__nav").css("margin-right",""),o&&$B.css("margin-right",""),s.css({transform:""}),s.one("webkitTransitionEnd transitionend msTransitionEnd oTransitionEnd",function(){$B.removeClass("_page-inner-moved")})}function n(e){var n="",a=$(".js-priceCalc_top-node").text(),t=$(".js-priceCalc_input-counter-price").val(),i=$(".js-priceCalc_chkb:checked");a&&(n+='<p class="side-popup__inject-option"><b>Кол-во покупателей: </b>'+a+"</p>"),t&&(n+='<p class="side-popup__inject-option"><b>Цена: </b>'+$().priceFormat(t)+" Р</p>"),t&&i.length&&(n+='<h6 class="h4">Опции</h6>',$.each(i.parents(".checkbox-label").find(".checkbox-label__txt"),function(){var e=$(this).text();n+='<p class="side-popup__inject-option">'+e+"</p>"})),e.html(n),e.append($(".js-priceCalc input").clone())}var a=$(".js-side-popup-btn");if(a.length){var t=$(".js-side-popup"),i=$(".js-side-popup_closer"),r=$(".page-inner,.js-header"),s=$(".page-inner"),o=$B.hasClass("blog")||$B.hasClass("single");a.bind("click",function(a){var i=$(this),l=i.data("popup-name"),c=i.data("calc-inject"),d=i.data("page-move"),p=t.filter('[data-popup-name="'+l+'"]'),u=p.find(".js-side-popup__inject-wr"),f=p.find(".js-side-popup__inject");return p.hasClass("_open")?void e():(f.html(""),c?(u.addClass("_active"),n(f)):u.removeClass("_active"),p.addClass("_open"),d?(s.css({transform:"translate3d(-"+p.width()+"px,0,0)"}),$B.addClass("_side-popup-open _side-popup-moved-page _page-inner-moved")):($B.addClass("_side-popup-open"),r.css("margin-right",$.scrollbarWidth()),o&&$B.css("margin-right",$.scrollbarWidth()),$W.width()<=_GLOB.breakpoints.header1&&$(".header__nav").css("margin-right",$.scrollbarWidth())),a.stopPropagation(),void $W.bind("click",function(n){var a=$(n.target);a.closest(p).length||(e(p),$W.unbind("click"))}))}),i.bind("click",function(){var n=$(this).parents(".js-side-popup");e(n)})}}),$(function(){var e=$(".js-popup-btn"),n=$(".js-header");e.magnificPopup({preloader:!1,type:e.data("type")||"inline",closeMarkup:_GLOB.closerReference,callbacks:{open:function(){n.css("margin-right",$.scrollbarWidth())},close:function(){n.css("margin-right","")}}})}),$(function(){var e=$(".js-video-popup");e.length&&e.magnificPopup({type:"iframe",mainClass:"mfp-fade",removalDelay:160,preloader:!1,fixedContentPos:!1,closeMarkup:_GLOB.closerReference,callbacks:{open:function(){$(".mfp-bg").css("background","rgba(1, 2, 0, 1)")},close:function(){$(".mfp-bg").css("background","")}}})});